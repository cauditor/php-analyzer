#!/usr/bin/env php
<?php
if (file_exists(__DIR__ . '/../../../autoload.php')) {
    require_once __DIR__ . '/../../../autoload.php';
} else {
    require_once __DIR__.'/../vendor/autoload.php';
}

try {
    $config = new Cauditor\Config(getcwd(), getcwd().DIRECTORY_SEPARATOR.'.cauditor.yml');
    $analyzer = new Cauditor\Analyzers\PDepend($config);
    $api = new \Cauditor\Api('https://www.cauditor.org');

    $runner = new \Cauditor\Runners\Current($config, $api, $analyzer);
    $runner->execute();
} catch (Exception $e) {
    exit(1);
}
